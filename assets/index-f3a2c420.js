var je=Object.defineProperty;var Ue=(t,e,n)=>e in t?je(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var H=(t,e,n)=>(Ue(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function B(){}function $e(t,e){for(const n in e)t[n]=e[n];return t}function Ne(t){return t()}function ke(){return Object.create(null)}function X(t){t.forEach(Ne)}function Ae(t){return typeof t=="function"}function Z(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function qe(t){return Object.keys(t).length===0}function Be(t,e,n,r){if(t){const s=Te(t,e,n,r);return t[0](s)}}function Te(t,e,n,r){return t[1]&&r?$e(n.ctx.slice(),t[1](r(e))):n.ctx}function ze(t,e,n,r){if(t[2]&&r){const s=t[2](r(n));if(e.dirty===void 0)return s;if(typeof s=="object"){const i=[],a=Math.max(e.dirty.length,s.length);for(let o=0;o<a;o+=1)i[o]=e.dirty[o]|s[o];return i}return e.dirty|s}return e.dirty}function Ge(t,e,n,r,s,i){if(s){const a=Te(e,n,r,i);t.p(a,s)}}function Ke(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function m(t,e){t.appendChild(e)}function R(t,e,n){t.insertBefore(e,n||null)}function D(t){t.parentNode&&t.parentNode.removeChild(t)}function Pe(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function b(t){return document.createElement(t)}function te(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function he(t){return document.createTextNode(t)}function S(){return he(" ")}function x(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function u(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ye(t){return t===""?null:+t}function Fe(t){return Array.from(t.childNodes)}function me(t,e){e=""+e,t.data!==e&&(t.data=e)}function J(t,e){t.value=e??""}function j(t,e,n){t.classList[n?"add":"remove"](e)}function Ie(t,e){return new t(e)}let we;function de(t){we=t}const ce=[],be=[];let ue=[];const Se=[],Je=Promise.resolve();let _e=!1;function Ve(){_e||(_e=!0,Je.then(xe))}function ye(t){ue.push(t)}const ge=new Set;let oe=0;function xe(){if(oe!==0)return;const t=we;do{try{for(;oe<ce.length;){const e=ce[oe];oe++,de(e),We(e.$$)}}catch(e){throw ce.length=0,oe=0,e}for(de(null),ce.length=0,oe=0;be.length;)be.pop()();for(let e=0;e<ue.length;e+=1){const n=ue[e];ge.has(n)||(ge.add(n),n())}ue.length=0}while(ce.length);for(;Se.length;)Se.pop()();_e=!1,ge.clear(),de(t)}function We(t){if(t.fragment!==null){t.update(),X(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ye)}}function Xe(t){const e=[],n=[];ue.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),ue=e}const pe=new Set;let ee;function De(){ee={r:0,c:[],p:ee}}function He(){ee.r||X(ee.c),ee=ee.p}function q(t,e){t&&t.i&&(pe.delete(t),t.i(e))}function K(t,e,n,r){if(t&&t.o){if(pe.has(t))return;pe.add(t),ee.c.push(()=>{pe.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function ne(t){t&&t.c()}function V(t,e,n,r){const{fragment:s,after_update:i}=t.$$;s&&s.m(e,n),r||ye(()=>{const a=t.$$.on_mount.map(Ne).filter(Ae);t.$$.on_destroy?t.$$.on_destroy.push(...a):X(a),t.$$.on_mount=[]}),i.forEach(ye)}function W(t,e){const n=t.$$;n.fragment!==null&&(Xe(n.after_update),X(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ze(t,e){t.$$.dirty[0]===-1&&(ce.push(t),Ve(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function re(t,e,n,r,s,i,a,o=[-1]){const l=we;de(t);const c=t.$$={fragment:null,ctx:[],props:i,update:B,not_equal:s,bound:ke(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:ke(),dirty:o,skip_bound:!1,root:e.target||l.$$.root};a&&a(c.root);let f=!1;if(c.ctx=n?n(t,e.props||{},(d,h,...p)=>{const w=p.length?p[0]:h;return c.ctx&&s(c.ctx[d],c.ctx[d]=w)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](w),f&&Ze(t,d)),h}):[],c.update(),f=!0,X(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){const d=Fe(e.target);c.fragment&&c.fragment.l(d),d.forEach(D)}else c.fragment&&c.fragment.c();e.intro&&q(t.$$.fragment),V(t,e.target,e.anchor,e.customElement),xe()}de(l)}class se{$destroy(){W(this,1),this.$destroy=B}$on(e,n){if(!Ae(n))return B;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}$set(e){this.$$set&&!qe(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}let fe;const Qe=new Uint8Array(16);function et(){if(!fe&&(fe=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!fe))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return fe(Qe)}const P=[];for(let t=0;t<256;++t)P.push((t+256).toString(16).slice(1));function tt(t,e=0){return(P[t[e+0]]+P[t[e+1]]+P[t[e+2]]+P[t[e+3]]+"-"+P[t[e+4]]+P[t[e+5]]+"-"+P[t[e+6]]+P[t[e+7]]+"-"+P[t[e+8]]+P[t[e+9]]+"-"+P[t[e+10]]+P[t[e+11]]+P[t[e+12]]+P[t[e+13]]+P[t[e+14]]+P[t[e+15]]).toLowerCase()}const nt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ee={randomUUID:nt};function rt(t,e,n){if(Ee.randomUUID&&!e&&!t)return Ee.randomUUID();t=t||{};const r=t.random||(t.rng||et)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let s=0;s<16;++s)e[n+s]=r[s];return e}return tt(r)}function ve(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Array.from(typeof t=="string"?[t]:t);r[r.length-1]=r[r.length-1].replace(/\r?\n([\t ]*)$/,"");var s=r.reduce(function(o,l){var c=l.match(/\n([\t ]+|(?!\s).)/g);return c?o.concat(c.map(function(f){var d,h;return(h=(d=f.match(/[\t ]/g))===null||d===void 0?void 0:d.length)!==null&&h!==void 0?h:0})):o},[]);if(s.length){var i=new RegExp(`
[	 ]{`+Math.min.apply(Math,s)+"}","g");r=r.map(function(o){return o.replace(i,`
`)})}r[0]=r[0].replace(/^\r?\n/,"");var a=r[0];return e.forEach(function(o,l){var c=a.match(/(?:^|\n)( *)$/),f=c?c[1]:"",d=o;typeof o=="string"&&o.includes(`
`)&&(d=String(o).split(`
`).map(function(h,p){return p===0?h:""+f+h}).join(`
`)),a+=d+r[l+1]}),a}const G=class{constructor(e,n){H(this,"url");H(this,"headers");H(this,"payload");H(this,"method");H(this,"withCredentials");H(this,"listeners");H(this,"xhr");H(this,"readyState");H(this,"progress");H(this,"chunk");this.url=e,n=n||{},this.headers=n.headers||{},this.payload=n.payload!==void 0?n.payload:"",this.method=n.method||this.payload&&"POST"||"GET",this.withCredentials=!!n.withCredentials,this.listeners={},this.xhr=null,this.readyState=G.INITIALIZING,this.progress=0,this.chunk=""}addEventListener(e,n){this.listeners[e]===void 0&&(this.listeners[e]=[]),this.listeners[e].indexOf(n)===-1&&this.listeners[e].push(n)}removeEventListener(e,n){if(this.listeners[e]===void 0)return;const r=this.listeners[e].filter(s=>s!==n);r.length===0?delete this.listeners[e]:this.listeners[e]=r}dispatchEvent(e){if(!e)return!0;e.source=this;const n="on"+e.type;return this.hasOwnProperty(n)&&(this[n].call(this,e),e.defaultPrevented)?!1:this.listeners[e.type]?this.listeners[e.type].every(r=>(r(e),!e.defaultPrevented)):!0}_setReadyState(e){const n=new CustomEvent("readystatechange");n.readyState=e,this.readyState=e,this.dispatchEvent(n)}_onStreamFailure(e){var r;const n=new CustomEvent("error");n.data=(r=e.currentTarget)==null?void 0:r.response,this.dispatchEvent(n),this.close()}_onStreamAbort(e){this.dispatchEvent(new CustomEvent("abort")),this.close()}_onStreamProgress(e){if(!this.xhr)return;if(this.xhr.status!==200){this._onStreamFailure(e);return}this.readyState==G.CONNECTING&&(this.dispatchEvent(new CustomEvent("open")),this._setReadyState(G.OPEN));const n=this.xhr.responseText.substring(this.progress);this.progress+=n.length,n.split(/(\r\n|\r|\n){2}/g).forEach(r=>{r.trim().length===0?(this.dispatchEvent(this._parseEventChunk(this.chunk.trim())),this.chunk=""):this.chunk+=r})}_onStreamLoaded(e){this._onStreamProgress(e),this.dispatchEvent(this._parseEventChunk(this.chunk)),this.chunk=""}_parseEventChunk(e){if(!e||e.length===0)return null;const n={id:null,retry:null,data:"",event:"message"};e.split(/\n|\r\n|\r/).forEach(s=>{s=s.trimEnd();const i=s.indexOf(G.FIELD_SEPARATOR);if(i<=0)return;const a=s.substring(0,i);if(!(a in n))return;const o=s.substring(i+1).trimLeft();a==="data"?n[a]+=o:n[a]=o});const r=new CustomEvent(n.event);return r.data=n.data,r.id=n.id,r}_checkStreamClosed(){this.xhr&&this.xhr.readyState===XMLHttpRequest.DONE&&this._setReadyState(G.CLOSED)}stream(){this._setReadyState(G.CONNECTING),this.xhr=new XMLHttpRequest,this.xhr.addEventListener("progress",this._onStreamProgress.bind(this)),this.xhr.addEventListener("load",this._onStreamLoaded.bind(this)),this.xhr.addEventListener("readystatechange",this._checkStreamClosed.bind(this)),this.xhr.addEventListener("error",this._onStreamFailure.bind(this)),this.xhr.addEventListener("abort",this._onStreamAbort.bind(this)),this.xhr.open(this.method,this.url);for(const e in this.headers)this.xhr.setRequestHeader(e,this.headers[e]);this.xhr.withCredentials=this.withCredentials,this.xhr.send(this.payload)}close(){var e;this.readyState!==G.CLOSED&&((e=this.xhr)==null||e.abort(),this.xhr=null,this._setReadyState(G.CLOSED))}};let F=G;H(F,"INITIALIZING",-1),H(F,"CONNECTING",0),H(F,"OPEN",1),H(F,"CLOSED",2),H(F,"FIELD_SEPARATOR",":");const st=(t,e,n,r)=>t?ve`
      You act as an HTML content generator for a website at a given URL and time given its specification.
      The generated page should make sense and be a good representation of the website at the given date in terms of content, style, color palette etc...
      Do not include scripts, images, svgs or lorem ipsums, only the template and inline styles using tailwind css (already imported).
      Images should be replaced with a placeholder rectangle containing the image's alt text.

      URL: https://${e}
      Date: ${n}
      Specification:
      ${r}
    `:ve`
      You act as an HTML content generator for a website at a given URL and time.
      The generated page should make sense and be a good representation of the website at the given date,
      in terms of content, style, color palette etc...
      Do not include scripts, images, svgs or lorem ipsums, only the template and inline styles using tailwind css (already imported).
      The styles should look beautiful.
      Images should be replaced with a placeholder rectangle containing the image's alt text.
      Do not add any explanations, just generate the HTML content for the website.
      If the date is in the future, imagine what the website will look like.
      If the date is in the past, imagine what the website looked like or would have looked like.
      If some placeholder text is needed, generate real-looking text.

      URL: https://${e}
      Date: ${n}
  `,it=async({OPENAI_API_KEY:t,url:e,date:n,temperature:r,specificationMode:s,onMessage:i,onComplete:a,onSpecification:o})=>{var w,y;const l=s?await(await fetch("https://api.openai.com/v1/chat/completions",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},method:"POST",body:JSON.stringify({model:"gpt-3.5-turbo",temperature:r,stream:!1,messages:[{role:"system",content:ve`
              You are a website specification agent, I give you a URL and a date
              and you should provide a detailed technical specification for the desired HTML page
              at the given date,
              if the website does/did not exist, come up with a realistic projection of what if could look like.
              You should structure the specification with these sections:
              
              1. Purpose: Describe a short description of the website and its purpose.
              2. Look and feel: Describe the overall style (sophisticated, fun, quirky...), color palette, etc...
              3. Structure: Define the layout of the page
              4. Content: Write short descriptions for the content of the different sections like the title of articles and what they should contain.
                Make sure that the content is realistic and makes sense for the given date, i.e if the date in in the early 2000s, the layout should reflect that.
          `},{role:"user",content:`url: https://${e}, date: ${n}`}]})})).json():null,c=((y=(w=l==null?void 0:l.choices[0])==null?void 0:w.message)==null?void 0:y.content)??"";s&&(o==null||o(c));const f=new F("https://api.openai.com/v1/chat/completions",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},method:"POST",payload:JSON.stringify({model:"gpt-3.5-turbo",temperature:r,stream:!0,messages:[{role:"system",content:st(s,e,n,c)},{role:"user",content:`url: https://${e}, date: ${n}`}]})});let d="<main>";const h=()=>{f.removeEventListener("message",p),f.close()},p=_=>{if(_.data==="[DONE]")a(d);else{const N=JSON.parse(_.data).choices[0].delta;"content"in N&&(d+=N.content,i(d))}};return f.addEventListener("message",p),f.stream(),{cancel:h,instance:f}};function lt(t){let e,n,r,s,i,a;const o=t[3].default,l=Be(o,t,t[2],null);return{c(){e=b("div"),n=b("input"),r=S(),s=b("label"),i=b("label"),l&&l.c(),u(n,"type","checkbox"),u(n,"id",t[0]),u(n,"class","modal-toggle btn btn-sm btn-outline btn-square ml-2"),n.checked=t[1],u(i,"for",""),u(i,"class","modal-box relative w-11/12 max-w-3xl h-1/2"),u(s,"for",t[0]),u(s,"class","modal cursor-pointer"),u(e,"class","llmirage-modal svelte-1he9h6k")},m(c,f){R(c,e,f),m(e,n),m(e,r),m(e,s),m(s,i),l&&l.m(i,null),a=!0},p(c,[f]){(!a||f&1)&&u(n,"id",c[0]),(!a||f&2)&&(n.checked=c[1]),l&&l.p&&(!a||f&4)&&Ge(l,o,c,c[2],a?ze(o,c[2],f,null):Ke(c[2]),null),(!a||f&1)&&u(s,"for",c[0])},i(c){a||(q(l,c),a=!0)},o(c){K(l,c),a=!1},d(c){c&&D(e),l&&l.d(c)}}}function ot(t,e,n){let{$$slots:r={},$$scope:s}=e,{id:i}=e,{isInitiallyOpen:a}=e;return t.$$set=o=>{"id"in o&&n(0,i=o.id),"isInitiallyOpen"in o&&n(1,a=o.isInitiallyOpen),"$$scope"in o&&n(2,s=o.$$scope)},[i,a,s,r]}class at extends se{constructor(e){super(),re(this,e,ot,lt,Z,{id:0,isInitiallyOpen:1})}}function ct(t){let e,n;return{c(){e=te("svg"),n=te("path"),u(n,"stroke-linecap","round"),u(n,"stroke-linejoin","round"),u(n,"d","M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width","1.5"),u(e,"stroke","currentColor"),u(e,"class","w-4 h-4")},m(r,s){R(r,e,s),m(e,n)},d(r){r&&D(e)}}}function ut(t){let e,n;return{c(){e=te("svg"),n=te("path"),u(n,"fill-rule","evenodd"),u(n,"d","M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z"),u(n,"clip-rule","evenodd"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"viewBox","0 0 24 24"),u(e,"fill","currentColor"),u(e,"class","w-4 h-4")},m(r,s){R(r,e,s),m(e,n)},d(r){r&&D(e)}}}function dt(t){let e,n,r;function s(o,l){return o[1]?ut:ct}let i=s(t),a=i(t);return{c(){e=b("div"),a.c(),u(e,"class",t[2])},m(o,l){R(o,e,l),a.m(e,null),n||(r=x(e,"click",t[3]),n=!0)},p(o,[l]){i!==(i=s(o))&&(a.d(1),a=i(o),a&&(a.c(),a.m(e,null))),l&4&&u(e,"class",o[2])},i:B,o:B,d(o){o&&D(e),a.d(),n=!1,r()}}}function ht(t,e,n){let{onStar:r}=e,{isStarred:s}=e,{className:i="btn btn-sm btn-square btn-outline rounded-none"}=e;const a=o=>{o.preventDefault(),r()};return t.$$set=o=>{"onStar"in o&&n(0,r=o.onStar),"isStarred"in o&&n(1,s=o.isStarred),"className"in o&&n(2,i=o.className)},[r,s,i,a]}class Re extends se{constructor(e){super(),re(this,e,ht,dt,Z,{onStar:0,isStarred:1,className:2})}}const ae=[];function ft(t,e=B){let n;const r=new Set;function s(o){if(Z(t,o)&&(t=o,n)){const l=!ae.length;for(const c of r)c[1](),ae.push(c,t);if(l){for(let c=0;c<ae.length;c+=2)ae[c][0](ae[c+1]);ae.length=0}}}function i(o){s(o(t))}function a(o,l=B){const c=[o,l];return r.add(c),r.size===1&&(n=e(s)||B),o(t),()=>{r.delete(c),r.size===0&&n&&(n(),n=null)}}return{set:s,update:i,subscribe:a}}const pt=()=>[],mt=()=>({}),gt=(t,e)=>{const n=ft(e);if(typeof localStorage<"u"){const r=localStorage.getItem(t);r!=null&&n.set(JSON.parse(r))}return localStorage.storable&&n.set(JSON.parse(localStorage.storable)),{subscribe:n.subscribe,set:r=>{localStorage.setItem(t,JSON.stringify(r)),n.set(r)},update:r=>{n.update(s=>(localStorage.setItem(t,JSON.stringify(r(s))),r(s)))}}},U=gt("llmirage",{version:1,OPENAI_API_KEY:"",cache:mt(),history:pt(),historyIndex:0,darkMode:!1,temperature:.6,specificationMode:!1});function Le(t,e,n){const r=t.slice();return r[9]=e[n],r[11]=n,r}function Me(t){let e,n,r,s,i,a=t[1][t[9]].url+"",o,l,c,f=t[1][t[9]].date+"",d,h,p,w,y,_,I,N;function A(){return t[6](t[9])}r=new Re({props:{onStar:A,isStarred:t[1][t[9]].starred,className:"btn btn-sm btn-square btn-ghost rounded-none"}});function z(){return t[7](t[11])}function M(){return t[8](t[11])}return{c(){e=b("tr"),n=b("td"),ne(r.$$.fragment),s=S(),i=b("td"),o=he(a),l=S(),c=b("td"),d=he(f),h=S(),p=b("td"),w=b("button"),w.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"></path></svg>',y=S(),u(i,"class","cursor-pointer max-w-md text-ellipsis overflow-hidden whitespace-nowrap"),u(w,"class","btn btn-sm btn-primary"),u(e,"class","hover border-primary"),j(e,"border-2",t[11]===t[2])},m(E,L){R(E,e,L),m(e,n),V(r,n,null),m(e,s),m(e,i),m(i,o),m(e,l),m(e,c),m(c,d),m(e,h),m(e,p),m(p,w),m(e,y),_=!0,I||(N=[x(i,"click",z),x(w,"click",M)],I=!0)},p(E,L){t=E;const O={};L&1&&(O.onStar=A),L&3&&(O.isStarred=t[1][t[9]].starred),r.$set(O),(!_||L&3)&&a!==(a=t[1][t[9]].url+"")&&me(o,a),(!_||L&3)&&f!==(f=t[1][t[9]].date+"")&&me(d,f),(!_||L&4)&&j(e,"border-2",t[11]===t[2])},i(E){_||(q(r.$$.fragment,E),_=!0)},o(E){K(r.$$.fragment,E),_=!1},d(E){E&&D(e),W(r),I=!1,X(N)}}}function bt(t){let e,n,r,s,i,a,o=t[0],l=[];for(let f=0;f<o.length;f+=1)l[f]=Me(Le(t,o,f));const c=f=>K(l[f],1,1,()=>{l[f]=null});return{c(){e=b("div"),n=b("table"),r=b("thead"),r.innerHTML=`<tr><th></th> 
                <th>URL</th> 
                <th>Date</th> 
                <th>Action</th></tr>`,s=S(),i=b("tbody");for(let f=0;f<l.length;f+=1)l[f].c();u(n,"class","table w-full overflow-y-auto"),u(e,"class","overflow-y-auto w-full h-full")},m(f,d){R(f,e,d),m(e,n),m(n,r),m(n,s),m(n,i);for(let h=0;h<l.length;h+=1)l[h]&&l[h].m(i,null);a=!0},p(f,[d]){if(d&63){o=f[0];let h;for(h=0;h<o.length;h+=1){const p=Le(f,o,h);l[h]?(l[h].p(p,d),q(l[h],1)):(l[h]=Me(p),l[h].c(),q(l[h],1),l[h].m(i,null))}for(De(),h=o.length;h<l.length;h+=1)c(h);He()}},i(f){if(!a){for(let d=0;d<o.length;d+=1)q(l[d]);a=!0}},o(f){l=l.filter(Boolean);for(let d=0;d<l.length;d+=1)K(l[d]);a=!1},d(f){f&&D(e),Pe(l,f)}}}function _t(t,e,n){let r=[],s={},i=0;U.subscribe(h=>{n(0,r=[...h.history]),n(2,i=h.historyIndex),n(1,s={...h.cache})});const a=h=>{U.update(p=>({...p,historyIndex:h}))},o=h=>{U.update(p=>({...p,cache:{...p.cache,[h]:{...p.cache[h],starred:!p.cache[h].starred}}}))},l=h=>{U.update(p=>{const w=[...p.history],y={...p.cache},_=w[h];return delete y[_],w.splice(h,1),{...p,history:w,cache:y,historyIndex:Math.max(h===i?h-1:i,0)}})};return[r,s,i,a,o,l,h=>o(h),h=>a(h),h=>l(h)]}class yt extends se{constructor(e){super(),re(this,e,_t,bt,Z,{})}}function vt(t){let e,n,r,s,i,a,o,l,c,f,d,h,p,w,y,_,I,N,A,z,M,E=t[3].toFixed(2)+"",L,O,C,Y,Q;return{c(){e=b("div"),n=b("div"),r=b("span"),r.textContent="OpenAI API Key",s=S(),i=b("input"),a=S(),o=b("div"),l=b("span"),l.textContent="Dark Mode",c=S(),f=b("input"),d=S(),h=b("div"),p=b("span"),p.textContent="Specification Mode",w=S(),y=b("input"),_=S(),I=b("div"),N=b("div"),A=b("span"),A.textContent="Temperature",z=S(),M=b("div"),L=he(E),O=S(),C=b("input"),u(r,"class","label-text font-semibold mb-1"),u(i,"type","password"),u(i,"class","input input-sm input-bordered"),u(i,"placeholder","Enter key..."),u(n,"class","form-control flex"),u(l,"class","label-text font-semibold mb-1"),u(f,"type","checkbox"),u(f,"class","toggle toggle-primary"),f.checked=t[1],u(o,"class","form-control"),u(p,"class","label-text font-semibold mb-1"),u(y,"type","checkbox"),u(y,"class","toggle toggle-primary"),y.checked=t[2],u(h,"class","form-control"),u(A,"class","label-text font-semibold mb-1"),u(M,"class","badge badge-outline badge-sm"),u(N,"class","flex gap-1 items-baseline"),u(C,"type","range"),u(C,"min",0),u(C,"max",1),u(C,"step",.01),u(C,"class","range range-primary"),u(I,"class","form-control"),u(e,"class","flex flex-col gap-4 basis-96 grow-[0.25]")},m(T,v){R(T,e,v),m(e,n),m(n,r),m(n,s),m(n,i),J(i,t[0]),m(e,a),m(e,o),m(o,l),m(o,c),m(o,f),m(e,d),m(e,h),m(h,p),m(h,w),m(h,y),m(e,_),m(e,I),m(I,N),m(N,A),m(N,z),m(N,M),m(M,L),m(I,O),m(I,C),J(C,t[3]),Y||(Q=[x(i,"input",t[8]),x(i,"change",t[9]),x(f,"change",t[5]),x(y,"change",t[6]),x(C,"change",t[10]),x(C,"input",t[10]),x(C,"change",t[11])],Y=!0)},p(T,[v]){v&1&&i.value!==T[0]&&J(i,T[0]),v&2&&(f.checked=T[1]),v&4&&(y.checked=T[2]),v&8&&E!==(E=T[3].toFixed(2)+"")&&me(L,E),v&8&&J(C,T[3])},i:B,o:B,d(T){T&&D(e),Y=!1,X(Q)}}}function wt(t,e,n){let r="",s=!1,i=!1,a=0;U.subscribe(y=>{n(0,r=y.OPENAI_API_KEY),n(1,s=y.darkMode),n(2,i=y.specificationMode),n(3,a=y.temperature)});const o=y=>{U.update(_=>({..._,OPENAI_API_KEY:y}))},l=()=>{U.update(y=>({...y,darkMode:!y.darkMode}))},c=()=>{U.update(y=>({...y,specificationMode:!y.specificationMode}))},f=y=>{U.update(_=>({..._,temperature:y}))};function d(){r=this.value,n(0,r)}const h=()=>o(r);function p(){a=Ye(this.value),n(3,a)}return[r,s,i,a,o,l,c,f,d,h,p,()=>f(a)]}class kt extends se{constructor(e){super(),re(this,e,wt,vt,Z,{})}}function Oe(t,e,n){const r=t.slice();return r[3]=e[n],r[5]=n,r}function Ce(t){let e,n=t[3].name+"",r,s,i,a;function o(){return t[2](t[5])}return{c(){e=b("div"),r=he(n),s=S(),u(e,"class","tab"),j(e,"tab-active",t[5]===t[0]),j(e,"font-bold",t[5]===t[0])},m(l,c){R(l,e,c),m(e,r),m(e,s),i||(a=x(e,"click",o),i=!0)},p(l,c){t=l,c&2&&n!==(n=t[3].name+"")&&me(r,n),c&1&&j(e,"tab-active",t[5]===t[0]),c&1&&j(e,"font-bold",t[5]===t[0])},d(l){l&&D(e),i=!1,a()}}}function It(t){let e,n,r,s,i,a,o=t[1],l=[];for(let d=0;d<o.length;d+=1)l[d]=Ce(Oe(t,o,d));var c=t[1][t[0]].content;function f(d){return{}}return c&&(i=Ie(c,f())),{c(){e=b("div"),n=b("div");for(let d=0;d<l.length;d+=1)l[d].c();r=S(),s=b("div"),i&&ne(i.$$.fragment),u(s,"class","my-4 w-full flex justify-center"),u(e,"class","tabs flex flex-1 flex-col items-center")},m(d,h){R(d,e,h),m(e,n);for(let p=0;p<l.length;p+=1)l[p]&&l[p].m(n,null);m(e,r),m(e,s),i&&V(i,s,null),a=!0},p(d,[h]){if(h&3){o=d[1];let p;for(p=0;p<o.length;p+=1){const w=Oe(d,o,p);l[p]?l[p].p(w,h):(l[p]=Ce(w),l[p].c(),l[p].m(n,null))}for(;p<l.length;p+=1)l[p].d(1);l.length=o.length}if(h&3&&c!==(c=d[1][d[0]].content)){if(i){De();const p=i;K(p.$$.fragment,1,0,()=>{W(p,1)}),He()}c?(i=Ie(c,f()),ne(i.$$.fragment),q(i.$$.fragment,1),V(i,s,null)):i=null}},i(d){a||(i&&q(i.$$.fragment,d),a=!0)},o(d){i&&K(i.$$.fragment,d),a=!1},d(d){d&&D(e),Pe(l,d),i&&W(i)}}}function St(t,e,n){let{tabs:r=[]}=e,{activeIndex:s=0}=e;const i=a=>{n(0,s=a)};return t.$$set=a=>{"tabs"in a&&n(1,r=a.tabs),"activeIndex"in a&&n(0,s=a.activeIndex)},[s,r,i]}class Et extends se{constructor(e){super(),re(this,e,St,It,Z,{tabs:1,activeIndex:0})}}function Lt(t){let e,n,r;return n=new Et({props:{tabs:[{name:"Settings",content:kt},{name:"History",content:yt}]}}),{c(){e=b("section"),ne(n.$$.fragment),u(e,"class","w-full h-48")},m(s,i){R(s,e,i),V(n,e,null),r=!0},p:B,i(s){r||(q(n.$$.fragment,s),r=!0)},o(s){K(n.$$.fragment,s),r=!1},d(s){s&&D(e),W(n)}}}class Mt extends se{constructor(e){super(),re(this,e,null,Lt,Z,{})}}function Ot(t){let e;return{c(){e=te("path"),u(e,"stroke-linecap","round"),u(e,"stroke-linejoin","round"),u(e,"d","M6 18L18 6M6 6l12 12")},m(n,r){R(n,e,r)},d(n){n&&D(e)}}}function Ct(t){let e;return{c(){e=te("path"),u(e,"stroke-linecap","round"),u(e,"stroke-linejoin","round"),u(e,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99")},m(n,r){R(n,e,r)},d(n){n&&D(e)}}}function Nt(t){let e,n;return e=new Mt({}),{c(){ne(e.$$.fragment)},m(r,s){V(e,r,s),n=!0},i(r){n||(q(e.$$.fragment,r),n=!0)},o(r){K(e.$$.fragment,r),n=!1},d(r){W(e,r)}}}function At(t){let e,n,r,s,i,a,o,l,c,f,d,h,p,w,y,_,I,N,A,z,M,E,L,O,C,Y;function Q(g,k){return g[3]?Ot:Ct}let T=Q(t),v=T(t);return p=new Re({props:{onStar:t[12],className:"btn btn-sm btn-square btn-outline border-l-0 rounded-none hidden sm:flex",isStarred:t[1].starred}}),M=new at({props:{id:"settings-modal",isInitiallyOpen:t[7],$$slots:{default:[Nt]},$$scope:{ctx:t}}}),{c(){e=b("section"),n=b("div"),r=b("button"),r.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"></path></svg>',s=S(),i=b("button"),i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"></path></svg>',a=S(),o=b("button"),l=te("svg"),v.c(),f=S(),d=b("input"),h=S(),ne(p.$$.fragment),w=S(),y=b("input"),_=S(),I=b("button"),I.textContent="Go",N=S(),A=b("label"),A.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>',z=S(),ne(M.$$.fragment),E=S(),L=b("div"),u(r,"class","btn btn-sm btn-outline border-r-0"),j(r,"btn-disabled",!t[5]),u(i,"class","btn btn-sm btn-outline"),j(i,"btn-disabled",!t[6]),u(n,"class","btn-group btn-group-horizontal mr-2"),u(l,"xmlns","http://www.w3.org/2000/svg"),u(l,"fill","none"),u(l,"viewBox","0 0 24 24"),u(l,"stroke-width","1.5"),u(l,"stroke","currentColor"),u(l,"class","w-4 h-4"),u(o,"class","btn btn-sm btn-outline btn-square mr-2 hidden sm:flex"),o.disabled=c=t[1].url.length===0,u(d,"type","search"),u(d,"class","input input-sm input-bordered basis-36 shrink text-ellipsis overflow-hidden whitespace-nowrap grow rounded-r-none border-r-0 svelte-1hpafni"),u(d,"placeholder","Enter a URL..."),u(y,"type","date"),u(y,"class","input input-sm input-bordered rounded-none border-l-0 basis-36 shrink-0 hidden sm:block svelte-1hpafni"),u(I,"class","btn btn-sm btn-primary rounded-l-none rounded-r-md"),j(I,"loading",t[3]),j(I,"btn-disabled",t[1].url.length===0),u(A,"for","settings-modal"),u(A,"class","btn btn-sm btn-square btn-outline ml-2"),u(e,"id","llmirage-top-bar"),u(e,"class","flex justify-center items-center p-2 z-50 bg-white svelte-1hpafni"),u(L,"id","content")},m(g,k){R(g,e,k),m(e,n),m(n,r),m(n,s),m(n,i),m(e,a),m(e,o),m(o,l),v.m(l,null),m(e,f),m(e,d),J(d,t[1].url),m(e,h),V(p,e,null),m(e,w),m(e,y),J(y,t[1].date),m(e,_),m(e,I),m(e,N),m(e,A),R(g,z,k),V(M,g,k),R(g,E,k),R(g,L,k),t[20](L),O=!0,C||(Y=[x(r,"click",t[15]),x(i,"click",t[16]),x(o,"click",t[10]),x(d,"input",t[17]),x(y,"input",t[18]),x(I,"click",t[19])],C=!0)},p(g,[k]){(!O||k&32)&&j(r,"btn-disabled",!g[5]),(!O||k&64)&&j(i,"btn-disabled",!g[6]),T!==(T=Q(g))&&(v.d(1),v=T(g),v&&(v.c(),v.m(l,null))),(!O||k&2&&c!==(c=g[1].url.length===0))&&(o.disabled=c),k&2&&d.value!==g[1].url&&J(d,g[1].url);const ie={};k&2&&(ie.isStarred=g[1].starred),p.$set(ie),k&2&&J(y,g[1].date),(!O||k&8)&&j(I,"loading",g[3]),(!O||k&2)&&j(I,"btn-disabled",g[1].url.length===0);const $={};k&128&&($.isInitiallyOpen=g[7]),k&67108864&&($.$$scope={dirty:k,ctx:g}),M.$set($)},i(g){O||(q(p.$$.fragment,g),q(M.$$.fragment,g),O=!0)},o(g){K(p.$$.fragment,g),K(M.$$.fragment,g),O=!1},d(g){g&&D(e),v.d(),W(p),g&&D(z),W(M,g),g&&D(E),g&&D(L),t[20](null),C=!1,X(Y)}}}function Tt(t,e,n){let r="",s,i=!1,a=[],o={},l=0,c=null,f=!1,d=!1,h=!1,p=window.matchMedia("(prefers-color-scheme: dark)").matches,w=!1,y=0,_={uuid:"",url:"",date:new Date().toISOString().split("T")[0],starred:!1};U.subscribe(v=>{if(n(2,r=v.OPENAI_API_KEY),a=[...v.history],n(4,l=v.historyIndex),n(5,f=l>0),n(6,d=l<a.length-1),n(14,p=v.darkMode),w=v.specificationMode,y=v.temperature,n(7,h||(h=r.trim().length===0)),l<a.length){const g=a[l];n(13,o={...v.cache});const k=v.cache[g];k!=null&&n(1,_={uuid:g,url:k.url,date:k.date,starred:k.starred})}});const I=(v={})=>{const g={uuid:rt(),url:_.url,date:_.date,starred:!1,...v};return n(1,_=g),g},N=({uuid:v,url:g,date:k},ie)=>{n(3,i=!1),U.update($=>({version:$.version,OPENAI_API_KEY:$.OPENAI_API_KEY,cache:{...$.cache,[v]:{uuid:v,date:k,url:g,content:ie,timestamp:Date.now(),starred:!1}},history:[v,...$.history],historyIndex:0,darkMode:p,temperature:$.temperature,specificationMode:$.specificationMode}))},A=async({uuid:v,url:g,date:k})=>{if(g.trim().length===0)return;n(0,s.innerHTML="",s),n(3,i=!0);const{cancel:ie,instance:$}=await it({OPENAI_API_KEY:r,url:g,date:k,temperature:y,specificationMode:w,onSpecification(le){console.log(le)},onMessage(le){n(0,s.innerHTML=le,s)},onComplete(le){n(3,i=!1),n(0,s.innerHTML=le,s),N(_,le)}});c&&ie(),c=$},z=()=>{i?(n(3,i=!1),c==null||c.close()):A(I())},M=v=>{U.update(g=>({...g,historyIndex:v}))},E=()=>{U.update(v=>({...v,cache:{...v.cache,[_.uuid]:{...v.cache[_.uuid],starred:!_.starred}}}))},L=()=>M(l-1),O=()=>M(l+1);function C(){_.url=this.value,n(1,_)}function Y(){_.date=this.value,n(1,_)}const Q=()=>{r.length===0?alert("Please set your OpenAI API key in the settings."):A(I())};function T(v){be[v?"unshift":"push"](()=>{s=v,n(0,s),n(1,_),n(13,o)})}return t.$$.update=()=>{t.$$.dirty&2&&(_.url.startsWith("https://")||_.url.startsWith("http://"))&&n(1,_.url=_.url.replace(/^(https?:\/\/)/,""),_),t.$$.dirty&8195&&s!=null&&_.uuid in o&&n(0,s.innerHTML=o[_.uuid].content,s),t.$$.dirty&16384&&document.querySelector("html").setAttribute("data-theme",p?"dark":"light")},[s,_,r,i,l,f,d,h,I,A,z,M,E,o,p,L,O,C,Y,Q,T]}class Pt extends se{constructor(e){super(),re(this,e,Tt,At,Z,{})}}new Pt({target:document.getElementById("app")});
